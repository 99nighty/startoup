
/* Drop Tables */

DROP TABLE CRAWLING CASCADE CONSTRAINTS;
DROP TABLE LISTS CASCADE CONSTRAINTS;
DROP TABLE MYFUNDING CASCADE CONSTRAINTS;
DROP TABLE MYLIKE CASCADE CONSTRAINTS;
DROP TABLE MEMBERS CASCADE CONSTRAINTS;
DROP TABLE PRODUCT CASCADE CONSTRAINTS;




/* Create Tables */

-- 크롤링
CREATE TABLE CRAWLING
(
	-- 크롤링 정보 번호
	C_NUM number NOT NULL,
	-- 제품번호
	C_PID number NOT NULL,
	-- 크롤링 대상 정보
	C_INFO varchar2(3000) NOT NULL,
	PRIMARY KEY (C_NUM)
);


-- 제품 펀딩 회원 리스트
CREATE TABLE LISTS
(
	-- 펀딩리스트번호
	L_NUM number NOT NULL,
	-- 제품번호
	L_PID number NOT NULL,
	-- 아이디
	L_MID varchar2(20) NOT NULL,
	PRIMARY KEY (L_NUM)
);


-- 회원
CREATE TABLE MEMBERS
(
	-- 아이디
	M_ID varchar2(20) NOT NULL,
	-- 패스워드
	M_PW varchar2(30) NOT NULL,
	-- 이름
	M_NAME varchar2(20) NOT NULL,
	-- 이메일1
	M_EMAIL1 varchar2(30) NOT NULL,
	-- 이메일2
	M_EMAIL2 varchar2(30) NOT NULL,
	-- 전화번호
	M_NUM varchar2(20) NOT NULL,
	-- 가입일자
	M_REGDATE date NOT NULL,
	PRIMARY KEY (M_ID)
);


-- 내 펀딩 목록
CREATE TABLE MYFUNDING
(
	-- 내 펀딩 정보 번호
	MF_NUM number NOT NULL,
	-- 아이디
	MF_MID varchar2(20) NOT NULL,
	-- 제품번호
	MF_PID number NOT NULL,
	PRIMARY KEY (MF_NUM)
);


-- 내 찜 목록
CREATE TABLE MYLIKE
(
	-- ML_NUM
	ML_NUM number NOT NULL,
	-- 아이디
	ML_MID varchar2(20) NOT NULL,
	-- 제품번호
	ML_PID number NOT NULL,
	PRIMARY KEY (ML_NUM)
);


-- 제품
CREATE TABLE PRODUCT
(
	-- 제품번호
	P_NUM number NOT NULL,
	-- 제품이름
	P_NAME varchar2(50) NOT NULL,
	-- 펀딩금액
	P_PRICE number NOT NULL,
	-- 제품설명
	P_INFO varchar2(3000) NOT NULL,
	-- 펀딩종료확인
	P_FINISH number DEFAULT 0 NOT NULL,
	-- P_IMAGE
	P_IMAGE varchar2(3000),
	-- 펀딩목표금액
	P_AMOUNT number NOT NULL,
	-- 현재펀딩금액
	P_CRNAMOUNT number DEFAULT 0 NOT NULL,
	PRIMARY KEY (P_NUM)
);



/* Create Foreign Keys */

ALTER TABLE LISTS
	ADD FOREIGN KEY (L_MID)
	REFERENCES MEMBERS (M_ID)
;


ALTER TABLE MYFUNDING
	ADD FOREIGN KEY (MF_MID)
	REFERENCES MEMBERS (M_ID)
;


ALTER TABLE MYLIKE
	ADD FOREIGN KEY (ML_MID)
	REFERENCES MEMBERS (M_ID)
;


ALTER TABLE CRAWLING
	ADD FOREIGN KEY (C_PID)
	REFERENCES PRODUCT (P_NUM)
;


ALTER TABLE LISTS
	ADD FOREIGN KEY (L_PID)
	REFERENCES PRODUCT (P_NUM)
;


ALTER TABLE MYFUNDING
	ADD FOREIGN KEY (MF_PID)
	REFERENCES PRODUCT (P_NUM)
;


ALTER TABLE MYLIKE
	ADD FOREIGN KEY (ML_PID)
	REFERENCES PRODUCT (P_NUM)
;



/* Comments */

COMMENT ON TABLE CRAWLING IS '크롤링';
COMMENT ON COLUMN CRAWLING.C_NUM IS '크롤링 정보 번호';
COMMENT ON COLUMN CRAWLING.C_PID IS '제품번호';
COMMENT ON COLUMN CRAWLING.C_INFO IS '크롤링 대상 정보';
COMMENT ON TABLE LISTS IS '제품 펀딩 회원 리스트';
COMMENT ON COLUMN LISTS.L_NUM IS '펀딩리스트번호';
COMMENT ON COLUMN LISTS.L_PID IS '제품번호';
COMMENT ON COLUMN LISTS.L_MID IS '아이디';
COMMENT ON TABLE MEMBERS IS '회원';
COMMENT ON COLUMN MEMBERS.M_ID IS '아이디';
COMMENT ON COLUMN MEMBERS.M_PW IS '패스워드';
COMMENT ON COLUMN MEMBERS.M_NAME IS '이름';
COMMENT ON COLUMN MEMBERS.M_EMAIL1 IS '이메일1';
COMMENT ON COLUMN MEMBERS.M_EMAIL2 IS '이메일2';
COMMENT ON COLUMN MEMBERS.M_NUM IS '전화번호';
COMMENT ON COLUMN MEMBERS.M_REGDATE IS '가입일자';
COMMENT ON TABLE MYFUNDING IS '내 펀딩 목록';
COMMENT ON COLUMN MYFUNDING.MF_NUM IS '내 펀딩 정보 번호';
COMMENT ON COLUMN MYFUNDING.MF_MID IS '아이디';
COMMENT ON COLUMN MYFUNDING.MF_PID IS '제품번호';
COMMENT ON TABLE MYLIKE IS '내 찜 목록';
COMMENT ON COLUMN MYLIKE.ML_NUM IS 'ML_NUM';
COMMENT ON COLUMN MYLIKE.ML_MID IS '아이디';
COMMENT ON COLUMN MYLIKE.ML_PID IS '제품번호';
COMMENT ON TABLE PRODUCT IS '제품';
COMMENT ON COLUMN PRODUCT.P_NUM IS '제품번호';
COMMENT ON COLUMN PRODUCT.P_NAME IS '제품이름';
COMMENT ON COLUMN PRODUCT.P_PRICE IS '펀딩금액';
COMMENT ON COLUMN PRODUCT.P_INFO IS '제품설명';
COMMENT ON COLUMN PRODUCT.P_FINISH IS '펀딩종료확인';
COMMENT ON COLUMN PRODUCT.P_IMAGE IS 'P_IMAGE';
COMMENT ON COLUMN PRODUCT.P_AMOUNT IS '펀딩목표금액';
COMMENT ON COLUMN PRODUCT.P_CRNAMOUNT IS '현재펀딩금액';



